#include "kernel/types.h"
#include "kernel/stat.h"
#include "user.h"

char buf[512];

void
cat(int fd)
{
	int n;

	while((n = read(fd, buf, sizeof(buf))) > 0) { //u buf upisujem ono sto procitam
		if (write(1, buf, n) != n) { // 1 konzola upisem ono sto pise u buffer duzine n
			printf("cat: write error\n");
			exit();
		}
	}
	if(n < 0){
		printf("cat: read error\n");
		exit();
	}
}

int
main(int argc, char *argv[])
{
	int fd, i;

	if(argc <= 1){
		cat(0);
		exit();
	}

	for(i = 1; i < argc; i++){
		if((fd = open(argv[i], 0)) < 0){
			printf("cat: cannot open %s\n", argv[i]);
			exit();
		}
		cat(fd);
		close(fd);
	}
	exit();
}
